<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>EYEK • Vote</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    body{margin:0;background:#0a0d14;color:#e6eef8;font-family:system-ui,Segoe UI,Arial,sans-serif}
    .wrap{max-width:900px;margin:24px auto;padding:16px}
    .card{background:#0f1422;border:1px solid #1d263b;border-radius:14px;padding:18px}
    .big{font-size:36px;font-weight:800;margin:10px 0}
    .mid{font-size:18px;color:#a7b7d4}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="big" id="title">Get ready…</div>
    <div class="mid" id="sub">Waiting for next singer</div>
  </div>
</div>
<script>
const URL='/assets/status.json';
async function tick(){
  const r = await fetch(URL+'?_=' + Date.now());
  const j = await r.json();
  const cur = j.current||{};
  const title = document.getElementById('title');
  const sub = document.getElementById('sub');

  if (cur.singer){
    title.textContent = cur.singer + (cur.songArtist ? ' — ' + cur.songArtist : '');
    if ((cur.voteEndsAt||0)*1000 > Date.now()){
      sub.textContent = 'Voting is open…';
    } else {
      sub.textContent = 'Get ready to vote…';
    }
  } else {
    title.textContent = 'Get ready…';
    sub.textContent = 'Waiting for next singer';
  }
  document.body.style.transform = `translateY(${Math.sin(Date.now()/15000)*1.5}px)`;
}
setInterval(tick, 2000);
tick();
</script>
</body>
</html>
