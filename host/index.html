<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>EYEK • Host</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" href="/assets/icon.png" />
<style>
  :root {
    --purple:#2F0658;
    --bg: var(--purple);
    --card:#12192a; --soft:#1b2540;
    --txt:#eaf2ff; --muted:#a9b6d9;
    --green:#25d366; --yellow:#f6c945; --red:#ff5e6c; --cyan:#3ad4ff; --accent:#7aa2ff;
  }
  body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.45 system-ui}
  .wrap{display:grid;grid-template-columns:320px 1fr;gap:16px;padding:16px}
  .card{background:linear-gradient(180deg,var(--card),#0f1526);border:1px solid #243459;border-radius:14px;padding:14px;box-shadow:0 6px 26px rgba(0,0,0,.35)}
  h1{margin:0 0 8px;font-size:20px}
  h2{margin:0 0 10px;font-size:16px;color:var(--muted)}
  input,button{font:inherit}
  input[type=text], input[type=date], input[type=password], input[type=email]{width:100%;padding:10px;border-radius:10px;border:1px solid #2b3c62;background:#0d1428;color:var(--txt)}
  .row{display:flex;gap:10px;align-items:center}
  .btn{border:0;border-radius:12px;padding:10px 14px;background:var(--soft);color:var(--txt);cursor:pointer}
  .btn.primary{background:var(--accent)}
  .btn.good{background:var(--green);color:#03140b}
  .btn.warn{background:var(--yellow);color:#2a2105}
  .btn.bad{background:var(--red)}
  .stack{display:grid;gap:12px}
  .side{display:grid;gap:12px}
  .list{display:grid;gap:8px;max-height:62vh;overflow:auto;padding-right:6px}
  .pill{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;background:#0d1428;border:1px solid #203153;border-radius:12px;padding:8px 10px}
  .dot{width:10px;height:10px;border-radius:50%;background:#6f7a98;border:1px solid #5b678a}
  .dot.green{background:var(--green);border-color:#2b8f57}
  .dot.yellow{background:var(--yellow);border-color:#9c7b1d}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
  .timer{font-size:34px;font-weight:800}
  .resultTag{padding:8px 12px;border-radius:999px;border:1px solid #2b3c62;background:#0d1428;min-width:160px;text-align:center;font-weight:700}
  .r-encore{color:var(--green)}.r-another{color:var(--yellow)}.r-maybe{color:var(--red)}
</style>
</head>
<body>
<div class="wrap">
  <div class="side">
    <div class="card">
      <h1>Rotation</h1>
      <div id="singerList" class="list"></div>
    </div>
  </div>
  <div class="stack">
    <details class="card" open>
      <summary><h1>Event / KJ Setup</h1></summary>
      <div class="stack">
        <div class="grid2">
          <input id="venue" type="text" placeholder="Venue name">
          <input id="eventDate" type="date">
        </div>
        <div class="grid2">
          <input id="kj" type="text" placeholder="KJ company or name">
          <input id="pin" type="password" placeholder="Event PIN">
        </div>
        <div class="row">
          <button class="btn primary" id="saveEvent">Save</button>
          <button class="btn" id="lockEvent">Lock</button>
          <button class="btn" id="resetEvent">Reset</button>
        </div>
      </div>
    </details>
    <div class="card">
      <h1>Show Control</h1>
      <div class="stack">
        <div>
          <div class="row">
            <input id="singerName" type="text" placeholder="Singer name">
            <input id="songArtist" type="text" placeholder="Song — Artist">
          </div>
          <button class="btn" id="addSinger">Add Singer</button>
        </div>
        <div>
          <h2>Current Singer</h2>
          <div id="currentName">—</div>
          <input id="currentSongArtist" type="text" placeholder="Next song/artist (for record)">
          <div class="row">
            <div class="timer" id="timer">00:00</div>
            <div id="resultTag" class="resultTag">—</div>
          </div>
          <div class="grid3">
            <button class="btn good" id="startVote">Start (30s)</button>
            <button class="btn warn" id="extendVote">Extend (+15s)</button>
            <button class="btn bad" id="endVote">End</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
let state={event:{},singers:[],current:{},voting:{counts:{}}};
function render(){
  const list=document.getElementById('singerList');list.innerHTML='';
  state.singers.forEach(s=>{const div=document.createElement('div');div.className='pill';const dot=document.createElement('div');dot.className='dot '+(s._color||'');div.appendChild(dot);const span=document.createElement('div');span.textContent=s.name;div.appendChild(span);const btn=document.createElement('button');btn.textContent='Set';btn.onclick=()=>setCurrent(s.id);div.appendChild(btn);list.appendChild(div)});
  document.getElementById('currentName').textContent=state.current.name||'—';
}
function setCurrent(id){const s=state.singers.find(x=>x.id===id);if(s){state.current={id:s.id,name:s.name,songArtist:''};render();}}
function addSinger(){const n=document.getElementById('singerName').value.trim();if(!n)return;const id='s'+Math.random().toString(36).slice(2,9);state.singers.push({id,name:n});render();}
document.getElementById('addSinger').onclick=addSinger;
</script>
</body>
</html>
