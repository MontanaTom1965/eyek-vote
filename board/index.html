<!doctype html>
<meta charset="utf-8" />
<title>Encore! • Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
<style>
  :root{--bg:#2F0658;--card:#1b0930;--line:#5b3d87;--txt:#eef3ff;--green:#25d366;--yellow:#f6c945}
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--txt);font:18px/1.4 system-ui}
  .wrap{min-height:100svh;display:grid;grid-template-columns:1fr 1fr;gap:20px;padding:24px}
  .col{background:linear-gradient(180deg,var(--card),#16072a);border:1px solid var(--line);border-radius:16px;display:flex;flex-direction:column}
  .title{font-family:"Bebas Neue"; font-size:6vmin; text-align:center; padding:16px 10px 8px; margin:0}
  .title.enc{color:var(--green)} .title.ano{color:var(--yellow)}
  .list{flex:1; overflow:auto; padding:0 16px 16px}
  .pill{display:flex;align-items:center;justify-content:space-between;gap:10px;background:#220d3f;border:1px solid #6f52a8;border-radius:12px;padding:12px 14px;margin:10px 0}
  .name{font-weight:800;font-size:22px}
  .song{opacity:.85}
</style>

<div class="wrap">
  <div class="col">
    <h2 class="title enc">Encore!</h2>
    <div id="encList" class="list"></div>
  </div>
  <div class="col">
    <h2 class="title ano">Another Shot!</h2>
    <div id="anoList" class="list"></div>
  </div>
</div>

<script>
const GET_URL='/assets/get_state.php';
const $=s=>document.querySelector(s);

async function tick(){
  const r=await fetch(GET_URL,{cache:'no-store'});
  const st=await r.json();
  const enc = st?.winners?.encore  ?? [];
  const ano = st?.winners?.another ?? [];
  render('#encList', enc);
  render('#anoList', ano);
}
function render(sel, arr){
  const box=$(sel); box.innerHTML='';
  arr.forEach(x=>{
    const row=document.createElement('div'); row.className='pill';
    const left=document.createElement('div');
    const name=document.createElement('div'); name.className='name'; name.textContent=x.name||'—';
    const song=document.createElement('div'); song.className='song'; song.textContent=x.song||'';
    left.append(name,song);
    const when=document.createElement('div'); when.textContent=new Date(x.when||Date.now()).toLocaleTimeString();
    row.append(left,when); box.append(row);
  });
}
setInterval(tick, 1500); tick();
</script>

<!-- FILE: /board/index.html -->
