<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>EYEK • Board</title>
<style>
  :root{--ink:#f6f3ff;--muted:#bdb6d5;--purple:#2F0658}
  html,body{margin:0;height:100%;background:linear-gradient(160deg,var(--purple),#0e0b14); color:var(--ink); font:18px/1.4 system-ui}
  .wrap{padding:24px}
  h1{margin:0 0 8px}
  .muted{color:var(--muted)}
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:10px; margin-top:10px}
  .card{background:#17132b; border:1px solid #2a2541; border-radius:14px; padding:12px}
  .name{font-weight:700}
  .notes{color:var(--muted); font-size:14px}
</style>
</head>
<body>
<div class="wrap">
  <h1>Rotation</h1>
  <div class="muted">Venue: <span id="venue">—</span> • KJ: <span id="kj">—</span></div>
  <div class="grid" id="list"></div>
</div>
<script>
const BASE = location.origin + '/assets';
const STATE_URL = BASE + '/status.json';
const list=document.getElementById('list'), venue=document.getElementById('venue'), kj=document.getElementById('kj');

async function tick(){
  try{
    const s = await fetch(STATE_URL+'?t='+Date.now()).then(r=>r.json());
    venue.textContent = s.event.venue||'—';
    kj.textContent = s.event.kj||'—';
    list.innerHTML='';
    s.singers.forEach((sg,i)=>{
      const card=document.createElement('div');card.className='card';
      card.innerHTML = `<div class="name">${i===s.currentIndex? '▶ ':''}${sg.name}</div><div class="notes">${sg.notes||''}</div>`;
      list.appendChild(card);
    });
  }catch(e){}
}
tick(); setInterval(tick, 1500);
</script>
</body>
</html>
