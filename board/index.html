<!doctype html>
<meta charset="utf-8"><title>Encore! • Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{margin:0;background:#0f1526;color:#eaf2ff;font:18px system-ui}
  .wrap{max-width:900px;margin:24px auto;padding:16px}
  h1{margin:0 0 16px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .card{background:#0d1428;border:1px solid #2b3c62;border-radius:14px;padding:14px}
  .item{padding:8px 10px;border-bottom:1px solid #203153}
  .item:last-child{border-bottom:0}
  .muted{color:#a9b6d9;font-size:12px}
</style>
<div class="wrap">
  <h1>Encore! Winners Board</h1>
  <div class="grid">
    <div class="card">
      <h2 style="margin-top:0;color:#25d366">Encore!</h2>
      <div id="encoreList"></div>
    </div>
    <div class="card">
      <h2 style="margin-top:0;color:#f6c945">Another Shot!</h2>
      <div id="anotherList"></div>
    </div>
  </div>
</div>
<script>
const GET_URL='/assets/get_state.php';
const $=s=>document.querySelector(s);
let state=null;
function renderList(el,arr){
  el.innerHTML = (arr&&arr.length? arr.map(x=>`<div class="item"><div><b>${(x.name||'—')}</b></div><div class="muted">${(x.song||'')}</div><div class="muted">${new Date(x.when).toLocaleTimeString()}</div></div>`).join('') : '<div class="muted">No winners yet…</div>');
}
async function tick(){
  const r=await fetch(GET_URL,{cache:'no-store'}); state=await r.json();
  renderList($('#encoreList'), state.winners?.encore);
  renderList($('#anotherList'), state.winners?.another);
}
setInterval(tick, 1200); tick();
</script>
